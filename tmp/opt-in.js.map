{"version":3,"sources":["../client/js/opt-in.js"],"names":[],"mappings":";;;AACA,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC7B,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC1B,IAAI,IAAI,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAChC,IAAI,WAAW,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;;AAG/C,IAAI,SAAS,GAAG,OAAO,CAAC,cAAc,CAAC,CAAA;;AAEvC,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC,WAAW,CAAC;;;AACjC,iBAAe,EAAE,yBAAU,CAAC,EAAE;;;AAC5B,eAAW,EAAE,CAAC;;AAEd,cAAU,CAAC,YAAM;AACf,eAAS,CAAC,6CAA6C,CAAC,YAAM;AAC5D,mBAAW,EAAE,CAAC;AACd,cAAK,KAAK,CAAC,eAAe,EAAE,CAAC;OAC9B,EAAE,YAAY;;OAEd,CAAC,CAAC;KACJ,EAAE,GAAG,CAAC,CAAC;GACT;AACD,QAAM,EAAE,kBAAY;AAClB,WACE;AAAC,UAAI;;MACH;;UAAK,KAAK,EAAE,EAAC,OAAO,EAAE,MAAM,EAAC,AAAC;QAC5B;;;;UAAwC,IAAI,CAAC,KAAK,CAAC,MAAM;;SAAM;OAC3D;MACN,oBAAC,WAAW;AACV,eAAO,EAAE,CAAC,EAAC,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,eAAe,EAAC,CAAC,AAAC;QACxD;KACG,CACR;GACF;CACF,CAAC,CAAC;;AAEH,IAAI,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,CAAC,CAAC;;AAExE,IAAI,WAAW,GAAG,SAAd,WAAW,GAAgB;AAC7B,mBAAiB,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;AACrC,mBAAiB,CAAC,SAAS,CAAC;AAC5B,mBAAiB,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;CACrC,CAAC;AACF,IAAI,WAAW,GAAG,SAAd,WAAW,GAAe;AAC5B,mBAAiB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AACzC,mBAAiB,CAAC,SAAS,CAAC;AAC5B,mBAAiB,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;CACrC,CAAC","file":"opt-in.js","sourcesContent":["// Require react, convenience libraries and UI components\nvar React = require('react');\nvar m = require('./m.js');\nvar Card = require('./card.js');\nvar CardOptions = require('./card-options.js');\n\n// Require core logic\nvar swLibrary = require('./swsetup.js')\n\nmodule.exports = React.createClass({\n  handleOKClicked: function (e) {\n    showOverlay();\n    // 300ms wait until the overlay has shown\n    setTimeout(() => {\n      swLibrary.requestPushNotificationPermissionAndSubscribe(() => {\n        hideOverlay();\n        this.props.onOptInComplete();\n      }, function () {\n        // TODO: Handle failure or permission rejection\n      });\n    }, 300);\n  },\n  render: function () {\n    return (\n      <Card>\n        <div style={{padding: '24px'}}>\n          <p>Up Dog will send you a notification {this.props.reason}.</p>\n        </div>\n        <CardOptions\n          options={[{label: 'OK', onClick: this.handleOKClicked}]}\n        />\n      </Card>\n    )\n  }\n});\n\nvar permissionOverlay = document.querySelector('div#permissionOverlay');\n\nvar showOverlay = function  () {\n  permissionOverlay.style.display = '';\n  permissionOverlay.offsetTop;\n  permissionOverlay.style.opacity = 1;\n};\nvar hideOverlay = function () {\n  permissionOverlay.style.display = 'none';\n  permissionOverlay.offsetTop;\n  permissionOverlay.style.opacity = 0;\n};\n"]}