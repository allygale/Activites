{"version":3,"sources":["tapalong/tapalong_app/client/src/view.js"],"names":[],"mappings":"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","file":"tapalong/tapalong_app/client/src/view.js","sourcesContent":["// var TextAreaResizing = require('react-textarea-autosize');\nvar models = require('./models.js');\nvar m = function (...objs) {\n  return Object.assign({}, ...objs);\n}\nvar React = require('react');\n\nvar toTwoDigitString = function (digit) {\n  return (digit < 10) ? '0' + digit : '' + digit;\n}\n\nvar getDateString = function (dateTime) {\n  return [(1900 + dateTime.getYear()),toTwoDigitString(dateTime.getMonth()+1),toTwoDigitString(dateTime.getDate())].join('-');\n}\n\nvar STATE = {add: 0, list: 1, edit: 2, loggedOut: 3, uninitialized: 4, notificationsOptIn: 5};\nvar currentState = STATE.uninitialized;\nvar selectedActivity;\nvar changeState = function (newState, options, userTriggered) {\n  console.log('Changing state to '+newState);\n  var lastState = currentState;\n  if (lastState == STATE.loggedOut) {\n    showHeader();\n    hideLogin();\n  }\n  currentState = newState;\n  if (currentState == STATE.list) {\n    hideBackButton();\n    setTitle('Upcoming Plans');\n    hideNotificationOptIn();\n    redrawActivitiesList();\n    showActivitiesList();\n    if (userTriggered) {\n      // Disabled due to http://crbug.com/459240\n      // history.pushState({state: STATE.list}, 'Upcoming Plans');\n    }\n    if (models.activities.getActivitiesCount() > 0) {\n      hideNoActivitiesCard();\n      hideCreateActivityForm();\n      showAddButton();\n    } else {\n      showNoActivitiesCard();\n      showCreateActivityForm();\n      hideAddButton();\n    }\n  } else if (currentState == STATE.add) {\n    setTitle('Create');\n    hideAddButton();\n    hideActivitiesList();\n    showCreateActivityForm();\n    showBackButton();\n    if (userTriggered) {\n      // history.pushState({state: STATE.add}, 'Create a plan');\n    }\n  } else if (currentState == STATE.edit) {\n    alert('editing')\n    setTitle('Edit');\n    hideAddButton();\n    hideActivitiesList();\n    showCreateActivityForm();\n    showBackButton();\n    if (userTriggered) {\n      // history.pushState({state: STATE.edit}, 'Edit plan');\n    }\n  } else if (currentState == STATE.loggedOut) {\n    // TODO: Move this state to within the model\n    hideHeader();\n    hideAddButton();\n    hideNoActivitiesCard();\n    showLogin();\n  } else if (currentState == STATE.notificationsOptIn) {\n    setTitle('Stay up to date');\n    hideNoActivitiesCard();\n    showNotificationOptIn(options.reason, options.nextState);\n    hideActivitiesList();\n    hideCreateActivityForm();\n  } else {\n    throw('Unknown state');\n  }\n};\nwindow.addEventListener('popstate', function(e) {\n  console.log('User pressed back, popping a state');\n  console.log(e);\n  if (e.state !== null && e.state.state !== undefined) {\n    console.log('Moving back in history to state '+e.state.state);\n    changeState(e.state.state, {}, false);\n  } else {\n    // Note safari calls popstate on page load so this is expected\n    console.log('Uh oh, no valid state in history to move back to');\n  }\n});\nvar Card = React.createClass({\n  render: function () {\n    var cardStyle = {\n      /* This puts the border inside the edge */\n      boxSizing: 'border-box',\n      maxWidth: '600px',\n      margin: '0 auto',\n      borderBottom: '1px solid rgba(0, 0, 0, 0.1)',\n      color: '#444',\n      lineHeight: '1.5em',\n      backgroundColor: '#fafafa',\n      /* For fading into 'attending' */\n      /*-webkitTransition: 'background-color 0.5s',*/\n    };\n    if (this.props.backgroundColor !== undefined) {\n      cardStyle = m(cardStyle, {backgroundColor: this.props.backgroundColor});\n    }\n    return (\n      <div style={cardStyle} onClick={this.props.onClick ? this.props.onClick : function () {}}>{this.props.children}</div>\n    );\n  }\n});\nvar CardOptions = React.createClass({\n  render: function () {\n    var optionStyle = {\n      textTransform: 'uppercase',\n      fontWeight: '600',\n      fontSize: '14px',\n      /* Put the padding and margin on the options so the click targets are larger */\n      padding: '6px 12px',\n      margin: '8px',\n      /* A default position */\n      float: 'right'\n    };\n    var enabledOptionStyle = {\n      color: '#00BCD4'\n    };\n    var disabledOptionStyle = {\n      color: '#CCC'\n    };\n    return (\n      <div>\n        <div style={optionStyle}>\n          <a style={this.props.options[0].disabled ? disabledOptionStyle : enabledOptionStyle}\n            onClick={this.props.options[0].disabled ? function(){} : this.props.options[0].onClick}>\n            {this.props.options[0].label}\n          </a>\n        </div>\n        <div style={{clear: 'both'}}></div>\n      </div>\n    )\n  }\n});\nvar ImgFadeInOnLoad = React.createClass({\n  getInitialState: function () {\n    return { loading: false, loaded: false };\n  },\n  loadImage: function (src) {\n    if (!this.loadingStarted) {\n      this.loadingStarted = true;\n      var img = new Image();\n      img.onload = function() {\n        this.setState({loaded: true})\n      }.bind(this);\n      img.src = src;\n    }\n  },\n  render: function () {\n    this.loadImage(this.props.src);\n    var overlayStyle = {\n      width: this.props.width,\n      height: this.props.height,\n      backgroundColor: this.props.backgroundColor,\n      opacity: '1',\n      transition: 'opacity 300ms',\n      position: 'absolute',\n      top: '0',\n      left: '0'\n    };\n    if (this.state.loaded) {\n      overlayStyle.opacity = 0;\n    }\n    var imgStyle = {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: this.props.width,\n      height: this.props.height\n    }\n    // To account for the clipping bug filed against Doug in Chrome\n    if (this.props.circular) {\n      overlayStyle.borderRadius = '50%';\n      overlayStyle.overflow = 'hidden';\n      imgStyle.borderRadius = '50%';\n      imgStyle.overflow = 'hidden';\n    }\n    return (\n      <div style={{position: 'relative'}}>\n        { this.state.loaded ? (<img src={this.props.src} style={imgStyle} />) : {} }\n        <div style={overlayStyle} />\n      </div>\n    )\n  }\n});\nvar FriendIcon = React.createClass({\n  render: function () {\n    var friendIconStyle = {\n      border: '1px solid #ccc',\n      borderRadius: '19px',\n      width: '38px',\n      height: '38px',\n      marginRight: '24px',\n      float: 'left',\n      overflow: 'hidden'\n    };\n    return (\n      <div style={friendIconStyle}>\n        <ImgFadeInOnLoad src={this.props.thumbnail} backgroundColor='ddd' width='38' height='38' circular/>\n      </div>\n    )\n  }\n});\nvar AttendeesList = React.createClass({\n  render: function () {\n    if (this.props.attendees < 1) {\n      return null;\n    } else {\n      return (\n        <div>\n          <p><b>People going</b></p>\n          {\n            this.props.attendees.map(function (attendee) {\n              return <p>attendee</p>\n            })\n          }\n        </div>\n      )\n    }\n  }\n});\nvar ActivityCard = React.createClass({\n  getInitialState: function () {\n    return {\n      viewingDetails: false\n    };\n  },\n  OPTIONS: {\n    edit: 0,\n    attend: 1,\n    undoAttend: 2\n  },\n  getCardsOption: function () {\n    if (this.props.activity.is_creator) {\n      return this.OPTIONS.edit;\n    } else if (this.props.activity.is_attending) {\n      return this.OPTIONS.undoAttend;\n    } else {\n      return this.OPTIONS.attend;\n    }\n  },\n  handleCardClicked: function () {\n    this.setState({viewingDetails: !this.state.viewingDetails});\n  },\n  handleEditClicked: function (e) {\n    // Prevent default so we don't also fire a click on the card\n    e.stopPropagation();\n    selectedActivity = this.props.activity.id;\n    changeState(STATE.edit, {}, true);\n  },\n  handleAttendClicked: function (e) {\n    // Prevent default so we don't also fire a click on the card\n    e.stopPropagation();\n    // Optimistically move onto the next page\n    swLibrary.hasPushNotificationPermission(function(){}, function() {\n      changeState(STATE.notificationsOptIn, {nextState: STATE.list, userTriggered: true, reason: 'if the plan changes'}, false);\n    });\n    // Note no callback since the list will automatically redraw when this changes\n    var optimistic = this.props.activity.dirty == undefined;\n    models.activities.trySetAttending(this.props.activity, !this.props.activity.is_attending, optimistic, function () {}, function () {\n      console.log('Uhoh, an optimistic error was a mistake!!');\n      alert('An unexpected error occurred. Please refresh.');\n    });\n  },\n  handleUndoAttendClicked: function (e) {\n    // Prevent default so we don't also fire a click on the card\n    e.stopPropagation();\n    alert('undo attend');\n  },\n  render: function() {\n    var optionString = ['Edit', 'Go along', 'Cancel attending'][this.getCardsOption()];\n    var onOptionClick = (function () {\n      switch(this.getCardsOption()) {\n        case this.OPTIONS.edit:\n          return this.handleEditClicked;\n          break;\n        case this.OPTIONS.attend:\n          return this.handleAttendClicked;\n          break;\n        case this.OPTIONS.undoAttend:\n          return this.handleUndoAttendClicked;\n          break;\n      }\n    }.bind(this))();\n\n    return (\n      <Card backgroundColor={this.props.activity.is_attending ? '#cdf9c9' : undefined} onClick ={this.handleCardClicked}>\n        <div style={{padding: '24px'}}>\n          <FriendIcon thumbnail={this.props.activity.thumbnail}/>\n          {/* This forces the title to not wrap around the bottom of the icon */}\n          <div style={{overflow: 'hidden'}}>\n            { /* Title section */ }\n            {this.props.activity.is_creator ? (\n              <span><b>You</b> are </span>\n            ) : (\n              <span><b>{this.props.activity.creator_name}</b> is </span>\n            )}<b>{this.props.activity.title}</b> {this.props.activity.start_time}\n            {\n              /* Description and attendees */\n              this.state.viewingDetails ? (\n                <div style={{marginTop: '16px'}}>\n                  <p><b>Description</b></p>\n                  <p style={{whiteSpace: 'pre'}}>{this.props.activity.description}</p>\n                  <AttendeesList attendees={this.props.activity.attendees}/>\n                </div>\n              ) : {}\n            }\n          </div>\n        </div>\n        <CardOptions\n          options={[{label: optionString, onClick: onOptionClick}]}\n        />\n      </Card>\n    );\n  }\n});\nvar ActivityCardList = React.createClass({\n  render: function () {\n    var activitiesList = models.activities.getActivities().map(function (activity) {\n      activity.key = activity.id;\n      return <ActivityCard activity={activity}/>;\n    });\n    return (\n      <div>\n        {activitiesList}\n      </div>\n    );\n  }\n});\nvar EditActivity = React.createClass({\n  getInitialState: function () {\n    return {\n      title: this.props.activity ? this.props.activity.title : '',\n      description: this.props.activity ? this.props.activity.description : '',\n      start_time: new Date(),\n      saving: false\n    };\n  },\n  handleTitleChange: function (e) {\n    this.setState({title: e.target.value});\n  },\n  handleDescriptionChange: function (e) {\n    this.setState({description: e.target.value});\n  },\n  handleDateTimeChange: function (e) {\n    // TODO: Implement me\n    // date assumes the input was in GMT and then converts to local time\n    var date = editSection.querySelector('input#date').valueAsDate;\n    var dateTime = new Date(date);\n    console.log('DateTime created in the form is ',dateTime);\n    // Make a timezone adjustment\n    dateTime.addMinutes(dateTime.getTimezoneOffset());\n    var time = editSection.querySelector('input#time').value.split(':');\n    dateTime.setHours(time[0]);\n    dateTime.setMinutes(time[1]);\n    console.log('DateTime created in the form is ',dateTime);\n  },\n  handleDateChange: function (e) {\n\n  },\n  handleTimeChange: function (e) {\n\n  },\n  handleSaveClicked: function (e) {\n    var thisButton = e.target;\n    this.setState({saving: true});\n\n    var activityChanges = {title: this.state.title, description: this.state.description, start_time: this.state.start_time};\n\n    models.activities.tryUpdateActivity(this.props.activity, activityChanges, function () {\n      swLibrary.hasPushNotificationPermission(function() {\n        changeState(STATE.list, {}, true);\n      }, function () {\n        changeState(STATE.notificationsOptIn, {nextState: STATE.list, userTriggered: true, reason: 'when a friend says they want to come along'}, false);\n      });\n    }, function () {\n      alert('An error occurred! Sorry :(. Please refresh.');\n      throw('Editing the activity failed. Help the user understand why.');\n    });\n  },\n  handleCreateClicked: function () {\n    var newActivity = {\n      title: this.state.title,\n      start_time: this.state.start_time,\n      location: '',\n      max_attendees: -1,\n      description: this.state.description\n    };\n    models.activities.tryCreateActivity(newActivity, function () {\n      swLibrary.hasPushNotificationPermission(function() {\n        changeState(STATE.list, {}, true);\n      }, function () {\n        changeState(STATE.notificationsOptIn, {\n          nextState: STATE.list,\n          userTriggered: true,\n          reason: 'when a friend says they want to come along'\n        }, false);\n      });\n    }, function () {\n      // thisButton.classList.toggle('disabled', false);\n      alert('Sorry, something went wrong. Please check you entered the information correctly.');\n      throw(\"Adding to server failed. Help the user understand why\");\n    });\n  },\n  render: function () {\n    var editing = !!this.props.activity;\n    /*\n      Set up styles\n    */\n    var inputStyle = {\n      display: 'block',\n      boxSizing: 'border-box',\n      width: '100%',\n      margin: '10px 0',\n      padding: '10px 10px 10px 2px',\n      borderTop: 'none',\n      borderRight: 'none',\n      borderBottom: '1px solid rgba(0, 0, 0, 0.1)',\n      borderLeft: 'none',\n      backgroundColor: 'rgba(0,0,0,0)',\n      outline: 'none'\n    };\n    /*\n      Set up the options on the card\n    */\n    var option = {label: 'Create', onClick: this.handleCreateClicked};\n    if (editing) {\n      option = {label: 'Save', onClick: this.handleSaveClicked};\n      if (this.state.saving) {\n        option.label = 'Saving...';\n        option.disabled = true;\n      }\n    }\n    /*\n      Set up dates for the form\n    */\n    var getTimeAndDateFormatted = function (dateTime) {\n      if (!dateTime instanceof Date) {\n        alert('An error occurred! Sorry :(. Please refresh.');\n        throw(\"start_time should be a Date but it was a string!\");\n      }\n      var colonSeparatedTime = toTwoDigitString(dateTime.getHours()) + ':' + toTwoDigitString(dateTime.getMinutes());\n      var hyphenSeparatedDate = getDateString(dateTime);\n      return {time: colonSeparatedTime, date: hyphenSeparatedDate};\n    };\n    var hyphenSeparatedToday = getDateString(Date.today());\n    var hyphenSeparatedTomorrow = getDateString(Date.today().add(1).days());\n    if (editing) {\n      var timeAndDate = getTimeAndDateFormatted(this.props.activity.start_time);\n      var hyphenSeparatedEventDate = timeAndDate.date;\n      var hyphenSeparatedEventTime = timeAndDate.time;\n    }\n    return (\n      <Card>\n        <div style={{padding: '24px'}}>\n          <b>{this.props.userName}</b> is<br />\n          <input type='text'\n            style={m(inputStyle, {fontSize: '1.2em'})}\n            className='input-placeholder-lighter focusUnderline'\n            value={this.state.title}\n            placeholder='Watching Frozen'\n            autoCapitalize='words'\n            required\n            onChange={this.handleTitleChange}>\n          </input>\n          <input\n            type='date'\n            style={m(inputStyle, {float: 'left', fontSize: '1em', width: 'auto'})}\n            className='input-placeholder-lighter focusUnderline'\n            min={hyphenSeparatedToday}\n            value={editing ? hyphenSeparatedEventDate : hyphenSeparatedTomorrow}\n            required>\n          </input>\n          <input\n            type='time'\n            style={m(inputStyle, {float: 'right', fontSize: '1em', width: '150px'})}\n            className='input-placeholder-lighter focusUnderline'\n            step=\"900\"\n            value={editing ? hyphenSeparatedEventTime : '13:00'}\n            required>\n          </input>\n          <div style={{clear: 'both'}}></div>\n          <textarea\n            id='description'\n            style={inputStyle}\n            className='focusUnderline'\n            placeholder='Extra information (where? when? what?)'\n            rows='1'\n            value={this.state.description}\n            onChange={this.handleDescriptionChange}>\n          </textarea>\n        </div>\n        <CardOptions options={[option]}/>\n      </Card>\n    )\n  }\n});\n\nvar activitiesSection = document.querySelector('section#activitiesList');\nvar editSection = document.querySelector('section#editActivity');\nvar addButton = document.querySelector('#addButton');\nvar backButton = document.querySelector('#backButton');\nvar title = document.querySelector('#title');\nvar noActivitiesCard = document.querySelector('#noActivitiesCard');\nvar notificationsOptInSection = document.querySelector('section#notificationsOptIn');\nvar permissionOverlay = document.querySelector('div#permissionOverlay');\nvar setTitle = function (newTitle) {\n  title.innerHTML = newTitle;\n};\nvar showHeader = function () {\n  var headerElem = document.querySelector('header');\n  headerElem.style.display = '';\n};\nvar hideHeader = function () {\n  var headerElem = document.querySelector('header');\n  headerElem.style.display = 'none';\n};\nvar showLogin = function () {\n  var loginElem = document.querySelector('#login');\n  loginElem.style.display = '';\n};\nvar hideLogin = function () {\n  var loginElem = document.querySelector('#login');\n  loginElem.style.display = 'none';\n};\nvar showBackButton = function () {\n  backButton.style.display = '';\n};\nvar hideBackButton = function () {\n  backButton.style.display = 'none';\n};\nvar showCreateActivityForm = function () {\n  var activity = null;\n  if (currentState == STATE.edit) {\n    // Get the selected activity if we're editing\n    activity = models.activities.getActivity(selectedActivity);\n  }\n  React.render(\n    <EditActivity activity={activity} userName={models.user.getUserName()} />,\n    document.getElementById('editActivity')\n  );\n\n  editSection.style.display = '';\n  //\n  // // Add interactivity\n  // var titleInputElem = editSection.querySelector('input#title');\n  // if (currentState == STATE.edit) {\n  //   editSection.querySelector('.option.cancel').onclick = function () {\n  //     if (confirm('This will notify everyone coming that the event is cancelled and remove it from the app. Confirm?')) {\n  //       this.classList.add('disabled');\n  //       models.activities.tryCancelActivity(activity, function () {\n  //         changeState(STATE.list, {}, true);\n  //       }, function () {\n  //         alert('An error occurred! Sorry :(. Please refresh.');\n  //         throw(\"Cancelling on server failed. Help the user understand why\");\n  //       });\n  //     } else {\n  //       // Do nothing\n  //     }\n  //   }\n  // } else if (currentState == STATE.add) {\n  //   // Why this needs a timeout is totally beyond me\n  //   setTimeout(function() {\n  //     titleInputElem.focus();\n  //     titleInputElem.scrollIntoView();\n  //   },0);\n  // }\n  //\n  // titleInputElem.addEventListener('keydown', function(key) {\n  //   if (key.keyCode == 13) {\n  //     this.blur();\n  //   }\n  // });\n};\nvar hideCreateActivityForm = function () {\n  editSection.style.display = 'none';\n};\nvar showNotificationOptIn = function (reason, nextState) {\n  // TODO(owencm): Show something different if the notification permission is denied\n  var source = document.querySelector('#notifications-opt-in-template').innerHTML;\n  var template = Handlebars.compile(source);\n  var config = {reason: reason};\n  notificationsOptInSection.innerHTML = template(config);\n  notificationsOptInSection.style.display = '';\n  // Add interactivity\n  notificationsOptInSection.querySelector('.option').onclick = function (e) {\n    showOverlay();\n    this.classList.add('disabled');\n    e.stopPropagation();\n    setTimeout(function() {\n      swLibrary.requestPushNotificationPermissionAndSubscribe(function (userChoice) {\n        hideOverlay();\n        if (userChoice == 'granted') {\n          changeState(nextState);\n        } else {\n          alert('You denied the permission, you naughty person.')\n        }\n        // TODO Handle rejection or error case\n      });\n    }, 300);\n  }\n}\nvar hideNotificationOptIn = function () {\n  notificationsOptInSection.style.display = 'none';\n}\nvar showAddButton = function () {\n  addButton.style.display = '';\n}\nvar hideAddButton = function () {\n  addButton.style.display = 'none';\n}\nvar showNoActivitiesCard = function () {\n  noActivitiesCard.style.display = '';\n};\nvar hideNoActivitiesCard = function () {\n  noActivitiesCard.style.display = 'none';\n};\nvar showActivitiesList = function () {\n  activitiesSection.style.display = '';\n};\nvar hideActivitiesList = function () {\n  activitiesSection.style.display = 'none';\n};\nvar showOverlay = function  () {\n  permissionOverlay.style.display = '';\n  permissionOverlay.offsetTop;\n  permissionOverlay.style.opacity = 1;\n};\nvar hideOverlay = function () {\n  permissionOverlay.style.display = 'none';\n  permissionOverlay.offsetTop;\n  permissionOverlay.style.opacity = 0;\n};\nvar redrawCurrentView = function () {\n  if (currentState == STATE.list) {\n    redrawActivitiesList();\n  }\n};\nvar redrawActivitiesList = function () {\n  React.render(\n    <ActivityCardList/>,\n    document.getElementById('activitiesList')\n  );\n  //   activityElem.onclick = function () {\n  //     selectedActivity = activity.id;\n  //     changeState(STATE.detail, {}, true);\n  //   };\n  //   activityElem.querySelector('.option').onclick = function (e) {\n\n  //   if (activity.is_attending) {\n  //     activityElem.classList.add('attending');\n  //   }\n  // });\n};\nvar setLoginButtonCallback = function (callback) {\n  var loginElem = document.querySelector('#login');\n  loginElem.onclick = callback;\n};\nvar appLoginSuccess = function (userId, userName, sessionToken) {\n  models.user.setUserName(userName);\n  models.user.setUserId(userId);\n  models.user.setSessionToken(sessionToken);\n  // TODO: Change to the list before we even have the activities to avoid an extra RTT on first load\n  models.activities.tryRefreshActivities(function () {\n    changeState(STATE.list, {}, true);\n  }, function () {\n    console.log('Failed to download activities')\n  });\n};\nvar fbLoginSuccess = function (fbToken) {\n  models.startLogin(fbToken, appLoginSuccess, function () {\n    throw('login to app failed');\n  });\n};\n\naddButton.onclick = function () {\n  changeState(STATE.add, {}, true);\n};\n\nbackButton.onclick = function () {\n  changeState(STATE.list, {}, true);\n};\n\nmodels.activities.addListener(redrawCurrentView);\n\nchangeState(STATE.loggedOut, {}, false);\n\nmodule.exports = {\n  setLoginButtonCallback: setLoginButtonCallback,\n  fbLoginSuccess: fbLoginSuccess,\n  debugSkipLogin: appLoginSuccess\n};\n"]}